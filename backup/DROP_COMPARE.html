<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title>ETF Comparison Cart</title>
		<p><div><h1> </h1></div></p>
		<meta name="description" content="Blueprint: A basic responsive product grid layout with comparison functionality" />
		<meta name="keywords" content="blueprint, template, html, css, javascript, grid, layout, effect, product comparison" />
		<meta name="author" content="Codrops" />
		<link rel="shortcut icon" href="favicon.ico">
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="http://cdn.productchart.com/elements/objects/styles.css">
		<!--side bar -->
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.2.0/css/font-awesome.min.css" />
		<link rel="stylesheet" type="text/css" href="css/demo_dd.css" />
		<link rel="stylesheet" type="text/css" href="css/sidebar.css" />
		<link rel="stylesheet" type="text/css" href="css/bottom-area.css" />
		<link rel="stylesheet" type="text/css" href="css/toggle.css" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap-slider.css" />
		<link rel="stylesheet" type="text/css" href="css/animate.css" />

   
			 <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/stylesheet.css">
    <link rel="stylesheet" href="css/demo_drag.css">
    <link rel="stylesheet" href="css/jquery.dad.css">
		<script src="js/jquery-1.11.3.min.js"></script>
		<script type="text/javascript" src="js/jquery-ui.min.js"></script>

        <!-- <script src="js/bootstrap.js"></script>-->
           <script src="js/bootstrap.min.js"></script>
           <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
		<script src="js/modernizr.custom_dd.js"></script>
		<script src="js/draggabilly.pkgd.min.js"></script>
		<script src="js/dragdrop.js"></script>
		
		<!--carousal -->
		 <!-- Example assets -->
        <link rel="stylesheet" type="text/css" href="jcarousel.responsive.css">
         
       <!-- <script type="text/javascript" src="../../libs/jquery/jquery.js"></script>
        <script type="text/javascript" src="../../dist/jquery.jcarousel.min.js"></script>-->
<!--
        <script type="text/javascript" src="jcarousel.responsive.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>
		
		<script type='text/javascript' src="http://bost.ocks.org/mike/fisheye/fisheye.js?0.0.3"> </script>-->

		
		<!--<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.3.min.css" />-->
		<!-- dad -->
	
	<!--	 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>-->
		<!--<script src="js/jquery.mobile-1.4.3.min.js"></script>-->
      
<style >

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

form {
  position: absolute;
  right: 10px;
  top: 10px;
}
</style>
     
    
		
    
		<!-- Modernizr is used for flexbox fallback -->
		<script src="js/modernizr.custom.js"></script>
		<!--<script src="js/flexscroll.js"></script>-->
		<script src="js/bootstrap-slider.js"></script>
		<script type="text/javascript" src="js/slideout.min.js"></script>
		<!--setting -->
		<!--
		<script src="js/jquery.fractionslider.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="js/jquery.smartmenus.min.js"></script>
		<script type="text/javascript" src="js/jquery.smartmenus.bootstrap.min.js"></script>-->
		<script type="text/javascript" src="js/jquery.jcarousel.js"></script>
		<!--<script type="text/javascript" src="js/jflickrfeed.js"></script>
		<script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
		<script type="text/javascript" src="js/jquery.isotope.min.js"></script>
		
		<script type="text/javascript" src="js/jquery-scrolltofixed-min.js"></script>-->
		<!-- drag -->
	
	</head>
	<body>
		<!-- Compare basket -->
		<div class="compare-basket">
			<button class="action action--button action--compare"><i class="fa fa-check"></i><span class="action__text">Compare</span></button>
		</div>
		<!-- Main view -->
		<div class="view">
			<!-- Blueprint header -->
			<header class="bp-header cf">

				<span> DRAG ETF CARD TO RIGHT FOR TOOLS AND DOWN FOR CDX/TRS/FUTURES </span>
				<h1>ETF Comparison Cart</h1>
				<nav>
					<a href="http://tympanus.net/Blueprints/GridGallery/" class="bp-icon bp-icon-prev" data-info="previous Blueprint"><span>Show List of ETF's</span></a>
					<a href="" class="bp-icon bp-icon-next" data-info="next Blueprint"><span>Next Blueprint</span></a-
					<a href="http://tympanus.net/codrops/category/blueprints/" class="bp-icon bp-icon-archive" data-info="Blueprints archive"><span>Done</span></a>
					<nav class="codrops-demos">
						<a href="DROP_COMPARE.html">USE TOOLS</a>
						<a href="COMPARE_BOARD.html">COMPARISON BUCKETS</a>
						
					</nav>
				</nav>
			</header>
			
          <div id = "original" class="product flipInY" style="display:none">
					<div id = "original" class="product__info">
						<img class="product__image slideIn" src="images/1.png" alt="Product 1" />
						<button type="button" class="btn btn-primary butt" data-toggle="modal" data-target="#myModal">CLICK TO KNOW MORE</button>
						  <table class="table table-striped table-bordered table-hover animated rotateIn">
    <thead>
      <tr>
      	<th>   </th>
        <th>FUTURES</th>
        <th>ETF</th>
        
      </tr>
    </thead>
    <tbody>
      <tr class="success">
        <td>COMMISSION</td>
        <td></td>
        <td></td>
      </tr>
      <tr class="info">
        <td>IMPACT AND SPREAD</td>
        <td></td>
        <td></td>
      </tr>
      <tr class="danger">
        <td>FUTURES ROLL COMMISSIONS</td>
        <td></td>
        <td></td>
      </tr>
      <tr class="warning">
        <td>RICHNESS/(CHEAPNESS)</td>
        <td></td>
        <td></td>
      </tr>
      <tr class="success">
        <td>ETF MANAGEMENET FEE</td>
        <td></td>
        <td></td>
        </tr>
        <tr>
        <td>BASKET LANDING REVENUE</td>
        <td></td>
        <td></td>
      </tr>
      <tr class="primary">
        <td>FOREIGN DIVIDEND TAX RECLAIM</td>
        <td></td>
        <td></td>
      </tr>
      
    </tbody>
  </table>
</div><!--table end -->
						
					</div>
					
				</div>
		</div>
<!-- filters -->

<div id = "car" style = "display:none" class="wrapper">
           
        

            <div id = "car" class="jcarousel-wrapper">
                <div id = "car"  class="jcarousel">
                    <ul>
                        <li>  <input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="20" data-slider-step="1" data-slider-value="14"/>YIELD</li>
                        <li> </li>
                        <li></li>
                        <li>  <input id="ex2" data-slider-id='ex2Slider' type="text" data-slider-min="0" data-slider-max="20" data-slider-step="1" data-slider-value="14"/>BID ASK SPREAD</li>
                        <li></li>
                         <li> </li>
                        <li><INPUT type="checkbox">EMERGING MARKET</li>
                        <li></li>
                         <li> </li>
                         <li><INPUT id = "rec" type="checkbox">RECENT SEARCHES</li>
                        <li></li>
                         <li> </li>
                          <li><INPUT id = "rec" type="search" placeholder="Type ETF Name">SEARCH</li>
                          <li></li>
                         <li> </li>


                        <li>Filter by price interval: <b> 10</b> <input id="ex3" type="text" class="span2" value="" data-slider-min="10" data-slider-max="1000" data-slider-step="5" data-slider-value="[250,450]"/> <b> 1000</b></li>
                          <li> </li>
                    </ul>
                </div>

                <a href="#" class="jcarousel-control-prev">&lsaquo;</a>
                <a href="#" class="jcarousel-control-next">&rsaquo;</a>

               <!--<p class="jcarousel-pagination"></p>-->
            </div>
        </div>




		

		
			
<!--done filters-->

<!--recent carousel-->
<div id = "car_rec" style = "display:none" class="wrapper">
           
          

            <div id = "car_rec" class="jcarousel-wrapper">
                <div id = "car_rec"  class="jcarousel">
                    <ul>
                        <li></li>
                        <li> <img src="images/1.png" style = "width-250px"></li>
                        <li></li>
                         <li> <img src="images/2.png" style = "width-250px"></li>
                       
                        <li></li>
                         <li> <img src="images/3.png" style = "width-250px"></li>
                         <li> </li>
                       
                       
                          <li> </li>
                    </ul>
                </div>

                <a href="#" class="jcarousel-control-prev">&lsaquo;</a>
                <a href="#" class="jcarousel-control-next">&rsaquo;</a>

               <!--<p class="jcarousel-pagination"></p>-->
            </div>
        </div>

        <!-- drag drop -->
    
<div id="grid" class="grid clearfix">
					<div class="grid__item butt">
						<kbd>ETF1</KBD> <i class="fa fa-fw fa-file-text-o"></i></div>
					<div class="grid__item butt"><kbd>ETF2</KBD><i class="fa fa-fw fa-file-text-o"></i></div>
					<div class="grid__item butt"><kbd>ETF3</KBD><i class="fa fa-fw fa-file-text-o"></i></div>
					<div class="grid__item butt"><kbd>ETF4</KBD><i class="fa fa-fw fa-file-text-o"></i></div>
					<div class="grid__item butt"><kbd>ETF5</KBD><i class="fa fa-fw fa-file-text-o"></i></div>
					<div class="grid__item butt"><kbd>ETF6</KBD><i class="fa fa-fw fa-file-text-o"></i></div>
					<div class="grid__item butt"><kbd>ETF7</KBD><i class="fa fa-fw fa-file-text-o"></i></div>
					
					
					
				</div>
<div id="drop-area" class="drop-area">
			<div>
				<div class="drop-area__item">DROP HERE FOR <BR> IRIS TOOL<div class="dummy"></div></div>
				<div class="drop-area__item">DROP HERE FOR <BR> WHAT IF??<div class="dummy"></div></div>
				<div class="drop-area__item">DROP HERE FOR <BR> PRE-TRADE TOOL<div class="dummy"></div></div>
				<div class="drop-area__item"><div class="dummy"></div></div>
				<div class="drop-area__item"><div class="dummy"></div></div>
				<div class="drop-area__item"><div class="dummy"></div></div>
				<div class="drop-area__item"><div class="dummy"></div></div>
				<div class="drop-area__item"><div class="dummy"></div></div>
			</div>
		</div>-->
<!--bottom drop -->

<div id="drop-area1" class="drop-area1">
			<div>
				<div class="dummy"></div>
				<div class="drop-area1__item">WHY ETF BETTER THAN CDX <BR> ? <i class="fa fa-fw fa-file-excel-o"></i></div>
				<div class="drop-area1__item">WHY ETF BETTER THAN TRS <BR> ?<i class="fa fa-fw fa-file-pdf-o"></i></div>
				
				<div class="drop-area1__item">WHY ETF BETTER THAN FUTURES <BR> ?<i class="fa fa-fw fa-file-archive-o"></i></div>
				
				
			</div>
		</div>
		<div class="drop-overlay1"></div>

<!--MODAL CONTENT -->

<!-- Trigger the modal with a button -->

<!-- Modal -->
<div id="myModal" class="modal fade " role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3 class="modal-title"><KBD>ETF NAME VS FUTURES</KBD></h3> 
        <img src="images/pdf.png" alt="graph here" style="width:404px;height:58px;">
      </div>
      <div class="modal-body">
       
        	
        	<button type="button" style ="display:inline" id = "butt5" class="btn btn-warning btn-lg butt">REAL TIME COMPARISON
        	</button>

        	
        	
        	<div data-role="PAGE" id="page1" style ="display:none">

			    <div data-role="header">
			        <h1>DETAILS ABOUT THIS </h1>
			    </div><!-- /header -->

			    <div data-role="content">    
			       
			    	
			    </div><!-- /content -->


					    <div data-role="footer">
					        <h4>Page Footer</h4>
					    </div><!-- /footer -->
				</div>

				<div data-role="PAGE"  id="body" style ="display:none">
					<div data-role="header">
			       
			    </div><!-- /header -->
			     <div data-role="content">  
			     		<form>
  <label><input type="radio" name="mode" value="grouped"> Grouped</label>
  <label><input type="radio" name="mode" value="stacked" checked> UPDATE</label>
</form>
			     	 </div><!-- /content -->
				</div>


      

		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
    </div><!--body-->

  </div><!--content-->
</div><!--mlg-->
</div><!--modal-->



<!--FINISH MODAL-->

<!--side bar -->

		</div><!-- /view -->

		

<!--finish bar -->

		<!-- product compare wrapper -->
		<section class="compare">
			<button class="action action--close"><i class="fa fa-remove"></i><span class="action__text action__text--invisible">Close comparison overlay</span></button>
		</section>
		<script src="js/classie.js"></script>
		<script src="js/main.js"></script>

		<!--sliders -->

		<script>
			var slider = new Slider('#ex1', {
			formatter: function(value) {
				

			return 'Current value: ' + value;}
		});
		</script>

		<script>
		$("#butt,#butt2,#butt3,#butt4").click(function(){
    $("#page1").slideToggle('slow');
    //$("#page1").slideToggle('slow');
    //$("#page2").show();

});
		$("#butt1").click(function(){
			$("#img_chart").slideToggle('slow');

		});

		$("#butt5").click(function(){
			$("#body").slideToggle('slow');

		});
		</script>

		<script>
		$('#ex1Slider').change(function(){
			//$('div').shuffle();
			$('div#myDiv3').shuffle();
			//$('div#myDiv4').shuffle();
		//$('div#myDiv2').hide();
		$('div#myDiv3').hide();
		$('div#myDiv4').hide();
		$('div#myDiv5').hide();
		$('div#myDiv6').hide();
		$('div#myDiv7').hide();
		//$('div#myDiv8').hide();
		console.log("hiding");
			//$('#myDiv').appendTo('body');*/

	});
		</script>


		<script>
		$('#ex2Slider').change(function(){
			$('div').shuffle();
		$('div#myDiv2').hide();
		$('div#myDiv3').hide();
		//$('div#rest').hide();
		
		//$('div#myDiv4').hide();
		
		//console.log("hiding");
			//$('#myDiv').appendTo('body');

	});</script>

		<script>
		$('#ex3Slider').change(function(){
			$('div#rest').shuffle();
		//$('div#myDiv2').hide();
		//$('div#myDiv3').hide();
		/*$('div#myDiv4').hide();
		$('div#myDiv5').hide();
		$('div#myDiv6').hide();
		//$('div#myDiv7').hide();
		$('#div#myDiv7').cycle({
			fy: 'shuffle',
			easing : 'easeOutBack',
			delay : -4000
		});
		$('div#myDiv8').hide();*/
		
			//$('#myDiv').appendTo('body');

	});
		</script>
		<script>
$(document).ready(function(){
	 //$("div#drop-area").slideToggle("slow");
	/* $("div#original").dialog({
       autoOpen: false,
        height: "auto",
        width: "auto",
        modal: true,
         my: "center",
         at: "center",
         of: window
})*/
	  $("div#grid").show();
	$("div#drag_drop").hide();
	//$("div#drop-area").hide();
	//$("div#drop-area1").hide();

	//$("#grid").hide();
	$("#filter").click(function(){
		//$("#car").show();
    $("#car").slideToggle("slow");
});

	$("#rec").click(function(){
		//$("#car").show();
    $("#car_rec").slideToggle("slow");
});


   });

	</script>


<script>


(function($){
 
    $.fn.shuffle = function() {
 
        var allElems = this.get(),
            getRandom = function(max) {
                return Math.floor(Math.random() * max);
            },
            shuffled = $.map(allElems, function(){
                var random = getRandom(allElems.length),
                    randEl = $(allElems[random]).clone(true)[0];
                allElems.splice(random, 1);
                return randEl;
           });
 
        this.each(function(i){
            $(this).replaceWith($(shuffled[i]));
        });
 
        return $(shuffled);
 
    };
 
})(jQuery);



	
	</script>

	<!--force graph -->

	<script type="application/json" id="mis">
  


</script>
	<script>

//Constants for the SVG

 

</script>

<!--<acript>-->

	<!--</script>-->
	<!-- drag drop -->
	
	<script src="js/jquery.min.js"></script>
	<script src="js/jquery-ui.min.js"></script>
<script src="js/jquery.dad.js"></script>
<script src="js/jquery.nicescroll.min.js"></script>
<script type="text/javascript">
     jQuery.curCSS = jQuery.css;
</script>

	<!--side bar -->
	
		<script>
			(function tools() {
				var body = document.body,
					dropArea = document.getElementById( 'drop-area' ),
					droppableArr = [], dropAreaTimeout;

				// initialize droppables
				[].slice.call( document.querySelectorAll( '#drop-area .drop-area__item' )).forEach( function( el ) {
					droppableArr.push( new Droppable( el, {
						onDrop : function( instance, draggableEl ) {
							// show checkmark inside the droppabe element
							//$(ui.instance).find('.link-to-open').click()
							 $(this).addClass( "ui-state-highlight" );  
       // $( "#cornDialog" ).dialog( "open" ); 

    alert("Dropped into tool box, Here Tool page will open as a pop up!");
							classie.add( instance.el, 'drop-feedback' );
							clearTimeout( instance.checkmarkTimeout );
							instance.checkmarkTimeout = setTimeout( function() { 
								classie.remove( instance.el, 'drop-feedback' );
							}, 800 );
							// ...
						}
					} ) );
				} );

			

				// initialize draggable(s)
				[].slice.call(document.querySelectorAll( '#grid .grid__item' )).forEach( function( el ) {
					new Draggable( el, droppableArr, {
						scroll : true,
						scrollable : '#drop-area',
						scrollSpeed : 40,
						scrollSensitivity : 50,
						draggabilly : { containment: document.body },
						onStart : function() {
							// add class 'drag-active' to body
							classie.add( body, 'drag-active' );
							// clear timeout: dropAreaTimeout (toggle drop area)
							clearTimeout( dropAreaTimeout );
							// show dropArea
							classie.add( dropArea, 'show' );
						},
						onEnd : function( wasDropped ) {
							var afterDropFn = function() {
								// hide dropArea
								classie.remove( dropArea, 'show' );
								// remove class 'drag-active' from body
								classie.remove( body, 'drag-active' );
							};

							if( !wasDropped ) {
								afterDropFn();
							}
							else {
								// after some time hide drop area and remove class 'drag-active' from body
								clearTimeout( dropAreaTimeout );
								dropAreaTimeout = setTimeout( afterDropFn, 400 );
								
							}
						}
					} );
				} );
			})();
		</script>

		<!--bottom-->
		<script>
			//(function() {
				(function cdx(){
				var body = document.body,
					dropArea = document.getElementById( 'drop-area1' ),
					droppableArr = [], dropAreaTimeout;

				// initialize droppables
				[].slice.call( document.querySelectorAll( '#drop-area1 .drop-area1__item' )).forEach( function( el ) {
					droppableArr.push( new Droppable( el, {
						onDrop : function( instance, draggableEl ) {
							// show checkmark inside the droppabe element
							//$(ui.instance).find('.link-to-open').click()
							// $(this).addClass( "ui-state-highlight" );  
       // $( "#cornDialog" ).dialog( "open" ); 
       /*	var p = window.createPopup();
       	var pbody = p.document.body;
       	pbody.style.backgroundColor = "lime";
       	pbody.style.border = "black";
       	pbody.innerHTML = "yo";
       	p.show(150,150,200,50,document.body);*/
   
   $("div#original").dialog({width: 600,height:500});
  // $("#myModal").modal("show");
							classie.add( instance.el, 'drop-feedback1' );
							clearTimeout( instance.checkmarkTimeout );
							instance.checkmarkTimeout = setTimeout( function() { 
								classie.remove( instance.el, 'drop-feedback1' );
							}, 800 );
							// ...
						}
					} ) );
				} );

			

				// initialize draggable(s)
				[].slice.call(document.querySelectorAll( '#grid .grid__item' )).forEach( function( el ) {
					new Draggable( el, droppableArr, {
						scroll : true,
						scrollable : '#drop-area1',
						scrollSpeed : 40,
						scrollSensitivity : 50,
						draggabilly : { containment: document.body },
						onStart : function() {
							// add class 'drag-active' to body
							classie.add( body, 'drag-active' );
							// clear timeout: dropAreaTimeout (toggle drop area)
							clearTimeout( dropAreaTimeout );
							// show dropArea
							classie.add( dropArea, 'show' );
						},
						onEnd : function( wasDropped ) {
							var afterDropFn = function() {
								// hide dropArea
								classie.remove( dropArea, 'show' );
								// remove class 'drag-active' from body
								classie.remove( body, 'drag-active' );
							};

							if( !wasDropped ) {
								afterDropFn();
							}
							else {
								// after some time hide drop area and remove class 'drag-active' from body
								clearTimeout( dropAreaTimeout );
								dropAreaTimeout = setTimeout( afterDropFn, 400 );
								
							}
						}
					} );
				} );
			})();
		</script>

		
	
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script>

var n = 4, // number of layers
    m = 58, // number of samples per layer
    stack = d3.layout.stack(),
    layers = stack(d3.range(n).map(function() { return bumpLayer(m, .1); })),
    yGroupMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y; }); }),
    yStackMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y0 + d.y; }); });

var margin = {top: 40, right: 10, bottom: 20, left: 10},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .domain(d3.range(m))
    .rangeRoundBands([0, width], .08);

var y = d3.scale.linear()
    .domain([0, yStackMax])
    .range([height, 0]);

var color = d3.scale.linear()
    .domain([0, n - 1])
    .range(["#aad", "#556"]);

var xAxis = d3.svg.axis()
    .scale(x)
    .tickSize(0)
    .tickPadding(6)
    .orient("bottom");

var svg = d3.select("#body").append("svg")
    .attr("width", width + margin.left + margin.right-80)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var layer = svg.selectAll(".layer")
    .data(layers)
  .enter().append("g")
    .attr("class", "layer")
    .style("fill", function(d, i) { return color(i); });

var rect = layer.selectAll("rect")
    .data(function(d) { return d; })
  .enter().append("rect")
    .attr("x", function(d) { return x(d.x); })
    .attr("y", height)
    .attr("width", x.rangeBand())
    .attr("height", 0);

rect.transition()
    .delay(function(d, i) { return i * 10; })
    .attr("y", function(d) { return y(d.y0 + d.y); })
    .attr("height", function(d) { return y(d.y0) - y(d.y0 + d.y); });

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

d3.selectAll("input").on("change", change);

var timeout = setTimeout(function() {
  d3.select("input[value=\"grouped\"]").property("checked", true).each(change);
}, 2000);

function change() {
  clearTimeout(timeout);
  if (this.value === "grouped") transitionGrouped();
  else transitionStacked();
}

function transitionGrouped() {
  y.domain([0, yGroupMax]);

  rect.transition()
      .duration(500)
      .delay(function(d, i) { return i * 10; })
      .attr("x", function(d, i, j) { return x(d.x) + x.rangeBand() / n * j; })
      .attr("width", x.rangeBand() / n)
    .transition()
      .attr("y", function(d) { return y(d.y); })
      .attr("height", function(d) { return height - y(d.y); });
}

function transitionStacked() {
  y.domain([0, yStackMax]);

  rect.transition()
      .duration(500)
      .delay(function(d, i) { return i * 10; })
      .attr("y", function(d) { return y(d.y0 + d.y); })
      .attr("height", function(d) { return y(d.y0) - y(d.y0 + d.y); })
    .transition()
      .attr("x", function(d) { return x(d.x); })
      .attr("width", x.rangeBand());
}

// Inspired by Lee Byron's test data generator.
function bumpLayer(n, o) {

  function bump(a) {
    var x = 1 / (.1 + Math.random()),
        y = 2 * Math.random() - .5,
        z = 10 / (.1 + Math.random());
    for (var i = 0; i < n; i++) {
      var w = (i / n - y) * z;
      a[i] += x * Math.exp(-w * w);
    }
  }

  var a = [], i;
  for (i = 0; i < n; ++i) a[i] = o + o * Math.random();
  for (i = 0; i < 5; ++i) bump(a);
  return a.map(function(d, i) { return {x: i, y: Math.max(0, d)}; });
}

/*
			var data_bar = [
  {"title":"Revenue","subtitle":"US$, in thousands","ranges":[150,225,300],"measures":[220,270],"markers":[250]},
  {"title":"Profit","subtitle":"%","ranges":[20,25,30],"measures":[21,23],"markers":[26]},
  {"title":"Order Size","subtitle":"US$, average","ranges":[350,500,600],"measures":[100,320],"markers":[550]},
  {"title":"New Customers","subtitle":"count","ranges":[1400,2000,2500],"measures":[1000,1650],"markers":[2100]},
  {"title":"Satisfaction","subtitle":"out of 5","ranges":[3.5,4.25,5],"measures":[3.2,4.7],"markers":[4.4]}
];

var margin = {top: 5, right: 40, bottom: 20, left: 120},
    width = 960 - margin.left - margin.right,
    height = 50 - margin.top - margin.bottom;

var chart = d3.bullet()
    .width(width)
    .height(height);

d3.json(data_bar, function(error, data) {
  if (error) throw error;

  var svg = d3.select("#body").selectAll("svg")
      .data(data)
    .enter().append("svg")
      .attr("class", "bullet")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
      .call(chart);

  var title = svg.append("g")
      .style("text-anchor", "end")
      .attr("transform", "translate(-6," + height / 2 + ")");

  title.append("text")
      .attr("class", "title")
      .text(function(d) { return d.title; });

  title.append("text")
      .attr("class", "subtitle")
      .attr("dy", "1em")
      .text(function(d) { return d.subtitle; });

  d3.selectAll("button").on("click", function() {
    svg.datum(randomize).call(chart.duration(1000)); // TODO automatic transition
  });
});

function randomize(d) {
  if (!d.randomizer) d.randomizer = randomizer(d);
  d.ranges = d.ranges.map(d.randomizer);
  d.markers = d.markers.map(d.randomizer);
  d.measures = d.measures.map(d.randomizer);
  return d;
}

function randomizer(d) {
  var k = d3.max(d.ranges) * .2;
  return function(d) {
    return Math.max(0, d + k * (Math.random() - .5));
  };
}*/

</script>

	</body>
</html>
